{% extends "base.html" %}

{% block title %} | {% if campus %}{{ campus.name }}{% endif %} Collections{% endblock %}

{% block content-inner %}
{% if collections %}
<div class="row">
  <div class="span10">
    {% if user.is_authenticated and editing %}
        <form action="{% url 'edit_collections' %}" method="post">
          {% csrf_token %}
          <button type="submit" name="new" value="true" class="btn"><i class="icon-plus"></i> Add new Collection</button>
        </form>
    {% endif %}
      
    <table class="table table-bordered table-striped">
      <tbody>
        {% for collection in collections %}
        <tr>
          <td>
            {% if user.is_authenticated and editing %}
            <a href="{% url 'edit_detail' colid=collection.id col_slug=collection.slug %}">{{ collection.name }}</a>
            {% else %}
            <a href="{% url 'detail' colid=collection.id col_slug=collection.slug %}">{{ collection.name }}</a>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <div class="row">
        <div class="span10">
            <div class="pagination">
                <ul>
                {% if collections.has_previous %}
                    <li><a href="?page=1" title="First Page">&laquo;&laquo;</a></li>
                    <li><a href="?page={{ previous_group_start }}" title="Previous Group">&laquo;</a></li>
                {% else %}
                    <li class="disabled"><a href="?page=1" title="First Page">&laquo;&laquo;</a></li>
                    <li class="disabled"><a href="?page=1" title="Previous Group">&laquo;</a></li>
                {% endif %}
                {% for page_num in previous_page_numbers %}
                <li><a href="?page={{page_num}}"><span class="sr-only">{{page_num}}</span></a></li>
                {% endfor %}
                <li class="active"><a href="#"><span class="sr-only">{{ collections.number}}</span></a></li>
                {% for page_num in next_page_numbers %}
                <li><a href="?page={{page_num}}"><span class="sr-only">{{page_num}}</span></a></li>
                {% endfor %}
                {% if collections.has_next %}
                <li><a href="?page={{ next_group_start }}" title="Next Group">&raquo;</a></li>
                    <li><a href="?page={{ collections.paginator.num_pages }}" title="Last Page">&raquo;&raquo;</a></li>
                {% else %}
                    <li class="disabled"><a href="?page={{ collections.paginator.num_pages}}" title="Next Group">&raquo;</a></li>
                    <li class="disabled"><a href="?page={{ collections.paginator.num_pages }}" title="Last Page">&raquo;&raquo;</a></li>
                {% endif %}
                </ul>
            </div>
        </div>
    </div>
  </div>
  <div class="span2">
    {% block navbar-campus %}
    <h4>Limit by campus</h4>
    <div class="navbar">
      <div class="navbar-inner" style="padding-right: 0px; padding-left: 0px">
        <div class="container">
          <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <!-- Everything you want hidden at 940px or less, place within here -->
          <div class="nav-collapse">
            <!-- .nav, .navbar-search, .navbar-form, etc -->
            <ul class="nav nav-stacked" style="margin: 0px">
              {% for campus_iter in campuses %}
              <li class="{% if campus_iter == campus %}active{% endif %}" style="width: 100%">
                {% if user.is_authenticated and editing %}
                  {% if campus_iter == campus %}
                    <a href="{% url "edit_collections" %}">
                      <div class="row-fluid">
                        <div class="pull-left"><i class="icon-remove" style="margin-right: .75em;"></i></div>
                        <div style="overflow: hidden; ">{{ campus_iter.name }}</div>
                      </div>
                    </a>
                  {% else %}
                    <a href="{% url "edit_collections" campus_slug=campus_iter.slug %}">
                      <div class="row-fluid">
                        <div class="pull-left"><i class="icon-remove" style="visibility:hidden; margin-left: .75em"></i></div>
                        <div style="overflow: hidden;">{{ campus_iter.name }}</div>
                      </div>
                    </a>
                  {% endif %}
                {% else %}
                  {% if campus_iter == campus %}
                    <a href="{% url "collections" %}">
                      <div class="row-fluid">
                        <div class="pull-left"><i class="icon-remove" style="margin-right: .75em;"></i></div>
                        <div style="overflow: hidden; ">{{ campus_iter.name }}</div>
                      </div>
                    </a>
                  {% else %}
                    <a href="{% url "collections" campus_slug=campus_iter.slug %}">
                      <div class="row-fluid">
                        <div class="pull-left"><i class="icon-remove" style="visibility:hidden; margin-left: .75em"></i></div>
                        <div style="overflow: hidden;">{{ campus_iter.name }}</div>
                      </div>
                    </a>
                  {% endif %}
                {% endif %}
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
    </div>
    {% endblock navbar-campus %}
  </div>
</div>
{% endif %}
{% endblock content-inner %}
